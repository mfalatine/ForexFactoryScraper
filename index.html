<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Forex Factory Data Scraper X18</title>
    <meta name="description" content="Forex Factory Data Scraper with rich JSON extraction">
    <link rel="stylesheet" href="index.css">
</head>
<body>
    <div class="container">
        <header>
            <h2>üìä Forex Factory Data Scraper X18</h2>
            <p class="subtitle">Enhanced scraper with rich JSON data extraction</p>
            <div class="last-update" id="lastUpdate">Loading...</div>

            <div class="buttons">
                <button class="btn-primary" onclick="downloadJSON()">
                    üì• Download JSON
                </button>
                <button class="btn-primary" onclick="downloadCSV()">
                    üì• Download CSV
                </button>
                <button class="btn-secondary" onclick="viewRawJSON()">
                    üëÅÔ∏è View Raw JSON
                </button>
                <button class="btn-secondary" onclick="viewGitHub()">
                    <svg width="20" height="20" viewBox="0 0 16 16" fill="currentColor">
                        <path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"/>
                    </svg>
                    View on GitHub
                </button>
                <button class="btn-secondary" onclick="viewChangeHistory()">
                    üìú Change History
                </button>
            </div>
            
            <!-- Manual Scraping Section -->
            <div class="manual-scraping-section">
                <div class="manual-scrape-grid">
                    <div class="left-column">
                        <div class="date-inputs">
                            <div class="input-group">
                                <label for="startDate">7-day window from selected date:</label>
                                <input type="date" id="startDate" value="">
                            </div>
                        </div>
                        <div class="button-stack">
                            <button class="btn-load" onclick="fetchIntoPage(event)">
                                ‚§µÔ∏è Load Into Page (Detailed)
                            </button>
                            <button class="btn-open-ff" onclick="runNow(event)">
                                üîó Open Week on ForexFactory
                            </button>
                        </div>
                    </div>
                    <div class="quick-links">
                        <strong>Quick Links</strong>
                        <a href="#" onclick="fetchQuick('day','yesterday');return false;">Yesterday</a>
                        <a href="#" onclick="fetchQuick('day','today');return false;">Today</a>
                        <a href="#" onclick="fetchQuick('day','tomorrow');return false;">Tomorrow</a>
                        <hr style="border:none;border-top:1px solid #e9ecef;margin:10px 0;">
                        <a href="#" onclick="fetchQuick('week','last');return false;">Last Week</a>
                        <a href="#" onclick="fetchQuick('week','this');return false;">This Week</a>
                        <a href="#" onclick="fetchQuick('week','next');return false;">Next Week</a>
                        <hr style="border:none;border-top:1px solid #e9ecef;margin:10px 0;">
                        <a href="#" onclick="fetchQuick('month','last');return false;">Last Month</a>
                        <a href="#" onclick="fetchQuick('month','this');return false;">This Month</a>
                        <a href="#" onclick="fetchQuick('month','next');return false;">Next Month</a>
                    </div>
                    
                    <!-- Filter Panel -->
                    <div class="filter-panel">
                        <h4>üîç Event Filters</h4>
                        <div class="filter-columns">
                            <!-- Expected Impact Column -->
                            <div class="filter-section">
                                <h5>Expected Impact <span>(<a href="#" onclick="toggleAllFilters('impact', true); return false;">all</a>, <a href="#" onclick="toggleAllFilters('impact', false); return false;">none</a>)</span></h5>
                                <div class="filter-item">
                                    <input type="checkbox" id="impact-high" checked>
                                    <label for="impact-high">
                                        <span class="impact-flag red"></span> High
                                    </label>
                                </div>
                                <div class="filter-item">
                                    <input type="checkbox" id="impact-medium" checked>
                                    <label for="impact-medium">
                                        <span class="impact-flag orange"></span> Medium
                                    </label>
                                </div>
                                <div class="filter-item">
                                    <input type="checkbox" id="impact-low" checked>
                                    <label for="impact-low">
                                        <span class="impact-flag yellow"></span> Low
                                    </label>
                                </div>
                                <div class="filter-item">
                                    <input type="checkbox" id="impact-none" checked>
                                    <label for="impact-none">
                                        <span class="impact-flag gray"></span> Non-Economic
                                    </label>
                                </div>
                            </div>
                            
                            <!-- Event Types Column -->
                            <div class="filter-section">
                                <h5>Event Types <span>(<a href="#" onclick="toggleAllFilters('type', true); return false;">all</a>, <a href="#" onclick="toggleAllFilters('type', false); return false;">none</a>)</span></h5>
                                <div class="filter-item">
                                    <input type="checkbox" id="type-growth" checked>
                                    <label for="type-growth">Growth</label>
                                </div>
                                <div class="filter-item">
                                    <input type="checkbox" id="type-inflation" checked>
                                    <label for="type-inflation">Inflation</label>
                                </div>
                                <div class="filter-item">
                                    <input type="checkbox" id="type-employment" checked>
                                    <label for="type-employment">Employment</label>
                                </div>
                                <div class="filter-item">
                                    <input type="checkbox" id="type-central-bank" checked>
                                    <label for="type-central-bank">Central Bank</label>
                                </div>
                                <div class="filter-item">
                                    <input type="checkbox" id="type-bonds" checked>
                                    <label for="type-bonds">Bonds</label>
                                </div>
                                <div class="filter-item">
                                    <input type="checkbox" id="type-housing" checked>
                                    <label for="type-housing">Housing</label>
                                </div>
                                <div class="filter-item">
                                    <input type="checkbox" id="type-consumer" checked>
                                    <label for="type-consumer">Consumer Surveys</label>
                                </div>
                                <div class="filter-item">
                                    <input type="checkbox" id="type-business" checked>
                                    <label for="type-business">Business Surveys</label>
                                </div>
                                <div class="filter-item">
                                    <input type="checkbox" id="type-speeches" checked>
                                    <label for="type-speeches">Speeches</label>
                                </div>
                                <div class="filter-item">
                                    <input type="checkbox" id="type-misc" checked>
                                    <label for="type-misc">Misc</label>
                                </div>
                            </div>
                            
                            <!-- Currencies Column -->
                            <div class="filter-section">
                                <h5>Currencies <span>(<a href="#" onclick="toggleAllFilters('curr', true); return false;">all</a>, <a href="#" onclick="toggleAllFilters('curr', false); return false;">none</a>)</span></h5>
                                <div class="filter-item">
                                    <input type="checkbox" id="curr-aud" checked>
                                    <label for="curr-aud">AUD</label>
                                </div>
                                <div class="filter-item">
                                    <input type="checkbox" id="curr-cad" checked>
                                    <label for="curr-cad">CAD</label>
                                </div>
                                <div class="filter-item">
                                    <input type="checkbox" id="curr-chf" checked>
                                    <label for="curr-chf">CHF</label>
                                </div>
                                <div class="filter-item">
                                    <input type="checkbox" id="curr-cny" checked>
                                    <label for="curr-cny">CNY</label>
                                </div>
                                <div class="filter-item">
                                    <input type="checkbox" id="curr-eur" checked>
                                    <label for="curr-eur">EUR</label>
                                </div>
                                <div class="filter-item">
                                    <input type="checkbox" id="curr-gbp" checked>
                                    <label for="curr-gbp">GBP</label>
                                </div>
                                <div class="filter-item">
                                    <input type="checkbox" id="curr-jpy" checked>
                                    <label for="curr-jpy">JPY</label>
                                </div>
                                <div class="filter-item">
                                    <input type="checkbox" id="curr-nzd" checked>
                                    <label for="curr-nzd">NZD</label>
                                </div>
                                <div class="filter-item">
                                    <input type="checkbox" id="curr-usd" checked>
                                    <label for="curr-usd">USD</label>
                                </div>
                            </div>
                        </div>
                        
                    </div>
                </div>
            </div>

            <div class="data-preview">
                <h2>üìä Detailed Data Preview (<span id="eventCount">Loading...</span>)</h2>
                <div class="pagination-controls" id="paginationControls" style="display: none;">
                    <button class="btn-pagination" onclick="changePage(-1)">‚Üê Previous</button>
                    <span class="page-info">
                        Page <span id="currentPage">1</span> of <span id="totalPages">1</span> 
                        (showing <span id="rowsShown">0</span> of <span id="totalRows">0</span> events)
                    </span>
                    <button class="btn-pagination" onclick="changePage(1)">Next ‚Üí</button>
                </div>
                <div id="tableContainer" class="loading">
                    Loading detailed data...
                </div>
            </div>
        </header>
        
        <footer>
            <p>
                Enhanced data extraction with rich JSON fields<br>
                <a href="https://github.com/mfalatine/ForexFactoryScraper" target="_blank">Star ‚≠ê on GitHub</a>
            </p>
        </footer>
    </div>
    <script src="index.js"></script>  
 
</body>
</html>